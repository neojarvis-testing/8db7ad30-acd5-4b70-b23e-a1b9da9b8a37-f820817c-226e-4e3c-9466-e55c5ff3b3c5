<div class="shared-container">
  <h2 class="shared-title">Feedback Details</h2>
  <hr class="shared-divider" />
  <div *ngIf="loading">Loading...</div>
  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
  <table *ngIf="!loading && !errorMessage && feedbacks.length > 0" class="table-shared">
    <thead>
      <tr>
        <th>S.No</th>
        <th>User Name</th>
        <th>Feedback</th>
        <th>Posted Date</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let fb of feedbacks; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ fb.user?.username || 'User' }}</td>
        <td>{{ fb.feedbackText }}</td>
        <td>{{ fb.date | date:'dd/MM/yyyy' }}</td>
        <td>
          <button class="btn-shared profile-btn" (click)="openProfile(fb.user)">Show Profile</button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="!loading && !errorMessage && feedbacks.length === 0" class="no-data">
  No feedback found.
</div>

  <!-- Modal for user details -->
  <div *ngIf="showModal" class="modal-backdrop">
    <div class="modal-content">
      <h4>User Details:</h4>
      <div *ngIf="selectedUser">
        <div>Email: {{ selectedUser.email }}</div>
        <div>Username: {{ selectedUser.username }}</div>
        <div>Mobile Number: {{ selectedUser.mobileNumber }}</div>
      </div>
      <button class="btn-shared btn-red" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>