<div class="booking-container">
    <!-- Navigation Bar -->
    <!-- <header class="header">
        <div class="nav-left">
            <span class="admin-label">Admin/Admin</span>
        </div>
        <nav class="nav-links">
            <a routerLink="/home">Home</a>
            <a routerLink="/conference-events">Conference Events</a>
            <a routerLink="/bookings" class="active">Requested Event Bookings</a>
            <a routerLink="/feedbacks">Feedbacks</a>
            <a routerLink="/logout">Logout</a>
        </nav>
    </header> -->

    <!-- Main Content -->
    <section class="content">
        <h2>Bookings Management</h2>
        <!-- Light blue separator line -->
        <div class="separator"></div>

        <!-- Filter Section (left aligned) -->
        <div class="filter">
            <label for="statusFilter">Filter by Status:</label>
            <select id="statusFilter" [(ngModel)]="filterStatus">
                <option value="all">All</option>
                <option value="Pending">Pending</option>
                <option value="Accepted">Accepted</option>
                <option value="Rejected">Rejected</option>
            </select>
        </div>

        <!-- Bookings Table -->
        <table class="booking-table">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Username</th>
                    <th>Event Name</th>
                    <th>Occupation</th>
                    <th>Gender</th>
                    <th>City</th>
                    <th>Booking Date</th>
                    <th>Status</th>
                    <th>Additional Notes</th>
                    <th>Mobile Number</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let booking of getFilteredBookings(); let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ booking.username }}</td>
                    <td>{{ booking.eventName }}</td>
                    <td>{{ booking.occupation }}</td>
                    <td>{{ booking.gender }}</td>
                    <td>{{ booking.city }}</td>
                    <td>{{ booking.bookingDate }}</td>
                    <td>
                        <!-- Status Dropdown with dynamic background color and custom arrow -->
                        <select class="status-dropdown" [ngClass]="{
                'pending': booking.status === 'Pending',
                'accepted': booking.status === 'Accepted',
                'rejected': booking.status === 'Rejected'
              }" [ngModel]="booking.status" (ngModelChange)="updateStatus(booking, $event)">
                            <option value="Pending">Pending</option>
                            <option value="Accepted">Accepted</option>
                            <option value="Rejected">Rejected</option>
                        </select>
                    </td>
                    <td>{{ booking.additionalNotes }}</td>
                    <td>{{ booking.mobile }}</td>
                    <td>
                        <button class="action-btn view-print" (click)="viewProof(booking)">View Proof</button>
                        <button class="action-btn delete-btn" (click)="deleteBooking(booking)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Proof Image Popup -->
    <div class="popup" *ngIf="showProofPopup">
        <div class="popup-content">
            <!-- Red circular close button -->
            <button class="close-button" (click)="closePopup()">&times;</button>
            <h3>Proof Image</h3>
            <img [src]="selectedBooking?.proofImage" alt="Proof Image" />
        </div>
    </div>

    <!-- Delete Confirmation Popup -->
    <div class="popup" *ngIf="showDeletePopup">
        <div class="popup-content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete this booking?</p>
            <div class="popup-buttons">
                <button class="confirm" (click)="confirmDelete()">Yes</button>
                <button class="cancel" (click)="closePopup()">No</button>
            </div>
        </div>
    </div>
</div>